<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:image" content="anige.png" />
    <title>å¤§å“¥ä¸Šä½ï¼šè§’é ­é¢¨é›²éŒ„</title>
    <style>
        /* --- å…¨åŸŸè¨­å®š (Global Styles) --- */
        :root {
            --bg-color: #1a1a1a;       /* æ·±ç°é»‘èƒŒæ™¯ */
            --card-bg: #2d2d2d;        /* å¡ç‰‡èƒŒæ™¯ */
            --accent-red: #c0392b;     /* é®®è¡€ç´… (åŠ äº®ä¸€é») */
            --accent-gold: #d4af37;    /* é‡‘æ¢é‡‘ */
            --accent-blue: #2980b9;    /* é€£çµè— */
            --text-main: #e0e0e0;      /* ä¸»è¦æ–‡å­— */
            --text-dim: #aaa;          /* æ¬¡è¦æ–‡å­— */
            --font-serif: 'Songti TC', 'Noto Serif TC', serif; 
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
            padding: 20px;
        }

        /* --- éŠæˆ²å®¹å™¨ --- */
        #game-container {
            width: 100%;
            max-width: 600px;
            background: var(--card-bg);
            border: 2px solid var(--accent-gold);
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 90vh; /* å›ºå®šé«˜åº¦ä»¥åˆ©å…§éƒ¨æ²å‹• */
            border-radius: 4px;
            transition: border-color 0.5s ease;
        }

        /* --- è¦–è¦ºå€åŸŸ --- */
        .visual-header {
            height: 200px;
            flex-shrink: 0;
            background-color: #000;
            background-image: url('BGpic.png'); 
            background-size: cover;
            background-position: center;
            position: relative;
            border-bottom: 4px solid var(--accent-red);
        }
        
        .visual-header::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, transparent 0%, var(--card-bg) 100%);
        }

        .title-overlay {
            position: absolute;
            bottom: 10px;
            left: 20px;
            font-family: var(--font-serif);
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--accent-gold);
            text-shadow: 2px 2px 4px #000;
            z-index: 2;
        }

        /* --- å…§å®¹æ²å‹•å€ --- */
        .content-scroll-area {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 40px;
            display: flex;
            flex-direction: column;
        }

        /* --- èªªè©±è€…èˆ‡æ–‡å­— --- */
        .speaker-tag {
            display: inline-block;
            background: var(--accent-red);
            color: white;
            padding: 4px 12px;
            font-size: 0.9rem;
            font-weight: bold;
            border-radius: 2px;
            margin-bottom: 12px;
            align-self: flex-start;
            box-shadow: 2px 2px 0px rgba(0,0,0,0.5);
        }

        .story-text {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 30px;
            color: var(--text-main);
            white-space: pre-wrap;
        }

        .scene-description {
            color: var(--text-dim);
            font-size: 0.95rem;
            font-style: italic;
            margin-bottom: 15px;
            display: block;
            border-left: 2px solid var(--text-dim);
            padding-left: 10px;
        }

        /* --- é¸é …æŒ‰éˆ•å€ --- */
        .choices-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: auto;
        }

        .choice-btn {
            background: rgba(0,0,0,0.2);
            border: 1px solid #555;
            border-left: 4px solid var(--accent-gold);
            color: var(--text-main);
            padding: 16px;
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            line-height: 1.4;
        }

        .choice-btn:hover {
            background: rgba(212, 175, 55, 0.15);
            padding-left: 20px;
            border-color: var(--accent-gold);
        }

        /* --- çµå±€è¡Œå‹•å‘¼ç±²å€ (End Game Actions) --- */
        #end-actions-area {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed #555;
            display: flex;
            flex-direction: column;
            gap: 10px;
            animation: fadeIn 1s ease;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            text-decoration: none; /* çµ¦ <a> æ¨™ç±¤ç”¨ */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.1s;
        }

        .action-btn:active { transform: scale(0.98); }

        /* è³¼æ›¸æŒ‰éˆ•ï¼šç´…è‰²å¼·èª¿ */
        .btn-buy {
            background-color: var(--accent-red);
            color: white;
            box-shadow: 0 4px 10px rgba(168, 50, 50, 0.4);
        }
        
        /* åˆ†äº«æŒ‰éˆ•ï¼šè—è‰²æˆ–ä¸­æ€§ */
        .btn-share {
            background-color: var(--accent-blue);
            color: white;
        }

        /* é‡æ–°é–‹å§‹æŒ‰éˆ• (åŸæœ¬çš„ choice-btn æ¨£å¼å¤ªç´ ï¼Œé€™è£¡ç¨å¾®æ”¹ä¸€ä¸‹) */
        .restart-style {
            background: #444;
            border-left: 4px solid #888;
        }

        /* --- éå ´æ–‡å­—å±¤ --- */
        #narrative-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
            font-family: var(--font-serif);
            font-size: 1.3rem;
            line-height: 1.6;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            z-index: 10;
        }

        #narrative-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        /* --- å‹•ç•«ç‰¹æ•ˆ --- */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shake-effect { animation: shake 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .hidden { display: none !important; }

        /* å·è»¸ç¾åŒ– */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #555; border-radius: 3px; }

    </style>
</head>
<body>

    <div id="game-container">
        <div class="visual-header">
            <div class="title-overlay" id="scene-title">å¤§å“¥ä¸Šä½</div>
        </div>

        <div class="content-scroll-area">
            <div id="speaker-name" class="speaker-tag hidden">ç³»çµ±</div>
            
            <div id="story-text" class="story-text"></div>

            <div id="choices-box" class="choices-container"></div>

            <div id="end-actions-area" class="hidden">
                </div>
        </div>

        <div id="narrative-overlay">
            <p id="narrative-text"></p>
        </div>
    </div>

    <script>
        // ==================================================
        // è¨­å®šå€ (ä½¿ç”¨è€…è«‹æ”¹é€™è£¡)
        // ==================================================
        
        // è«‹å°‡æ­¤è™•çš„ç¶²å€æ›¿æ›ç‚ºå¯¦éš›çš„è³¼æ›¸é€£çµ (ä¾‹å¦‚åšå®¢ä¾†ã€èª å“æˆ–é›»å­æ›¸é€£çµ)
        const bookLink = "https://s.shopee.tw/8AOY4XtvJi"; 

        // ==================================================
        // è…³æœ¬è³‡æ–™åº«
        // ==================================================
        const gameData = {
            "intro": {
                title: "åºå¹•",
                speaker: "", 
                text: `é€™æ˜¯å…¬å…±å·¥ç¨‹èµ·é£›çš„ç‹‚é£†å¹´ä»£ã€‚æƒ³æç‡Ÿé€ ï¼Œä¸ç”¨çœ‹å­¸æ­·ï¼Œä½†å¾—çœ‹ä¸Šé¢æœ‰èª°ç½©ã€‚åœ¨å®˜å•†é»‘å‹¾çµçš„ä¿®ç¾…å ´è£¡ï¼Œæ”¿æ²»äººç‰©ã€è­¦å¯Ÿã€è§’é ­ï¼Œæ¯å€‹äººéƒ½å¼µè‘—è¡€ç›†å¤§å£æƒ³åˆ†ä¸€æ¯ç¾¹ã€‚\n\nä½ æ˜¯éƒ­å¤©ä¿â€”â€”ç¸±è²«ç·šä¸‰é‡åŸ”çš„è§’é ­è€å¤§ã€‚ä»Šæ™šï¼Œä½ ä»£è¡¨ã€Œæ˜‡é¾ç‡Ÿé€ ã€ï¼Œè¦çˆ­å¥ªé ç®—é«˜é” 2 å„„ çš„ã€ŒåŒ—æµ·å²¸ A16 å¿«é€Ÿé“è·¯å·¥ç¨‹ã€ã€‚å°é¢çš„ã€Œå‰æšç‡Ÿé€ ã€å·²ç¶“äº®ç‰Œäº†ã€‚èŒ¶å·²æ³¡å¥½ï¼Œæ§å·²ä¸Šè†›ã€‚\n\nå¤©ä¿è€å¤§ï¼Œè©²ä½ å‡ºç‰Œäº†...`,
                choices: [
                    { text: "[ é»èµ·é€™æ ¹è¸ï¼Œä¸Šæ¡Œ ]", narrative: "ä½ é»ç‡ƒé¦™è¸ï¼Œæ·±æ·±å¸äº†ä¸€å£ï¼Œæ¨é–‹äº†åŒ…å»‚åšé‡çš„å¤§é–€...", next: "scene1" }
                ]
            },
            
            "scene1": {
                title: "å ´æ™¯ä¸€ï¼šå…ˆç¦®å¾Œå…µ",
                speaker: "æ¹›åœ‹æ¸…",
                text: `<span class="scene-description">(ç…™éœ§ç¹šç¹çš„åœ“æ¡Œï¼Œå°é¢åè‘—æ¹›åœ‹æ¸…ã€‚)</span>ã€Œå¤©ä¿å…„ã€åœ‹å½¬å…„ã€‚æ„Ÿè¬è«¸ä½ä»Šå¤©è³è‡‰ä¾†é€™å…’å–èŒ¶ã€‚é€™æ¬¡ A16 çš„å·¥ç¨‹ï¼Œè‚‰å¾ˆè‚¥ï¼Œä½†åªèƒ½æœ‰ä¸€å€‹äººåƒã€‚æˆ‘å¸Œæœ›ä¸‰é‡åŸ”çš„å…„å¼Ÿèƒ½æˆå…¨å°å¼Ÿã€‚ä»¥å¾Œè©²æœ‰çš„ã€ç¦®æ•¸ã€ï¼Œæˆ‘æ¹›æŸäººçµ•ä¸æœƒå°‘çµ¦ã€‚ã€`,
                choices: [
                    { text: "A. [ ç¤ºå¼± ] ã€Œæ¹›å¤§å“¥é–‹å£ï¼Œå°å¼Ÿå“ªæ•¢ä¸å¾ï¼Ÿã€", narrative: "ä½ ä½ä¸‹é ­ï¼Œä¸æ•¢ç›´è¦–å°æ–¹çš„çœ¼ç›ï¼Œé¸æ“‡äº†é€€è®“...", next: "end1" },
                    { text: "B. [ å¼·ç¡¬ ] ã€ŒæŠ±æ­‰äº†ã€‚é€™å¡Šè‚‰æˆ‘ç›¯äº†åŠå¹´ï¼Œåå¾—ä¸‹è¦åï¼Œåä¸ä¸‹ç¡¬åæˆ‘ä¹Ÿæœƒåã€‚ã€", narrative: "ä½ å†·ç¬‘ä¸€è²ï¼ŒæŠŠè©±èªªæ­»ï¼Œå ´é¢ç¬é–“é™åˆ°å†°é»ã€‚", next: "scene3" },
                    { text: "C. [ å˜²è«· ] ã€Œæ¹›å…„ï¼Œä½ ç•¶æˆ‘æ˜¯ä¾†è¦é£¯çš„ï¼Ÿå¹¾å¥ã€ç¦®æ•¸ã€å°±æƒ³æ‰“ç™¼æˆ‘ï¼Ÿã€", narrative: "ä½ æŠŠèŒ¶æ¯é‡é‡ä¸€é “ï¼ŒèŒ¶æ°´æ¿ºäº†å‡ºä¾†ã€‚", next: "scene2" }
                ]
            },

            "scene2": {
                title: "å ´æ™¯äºŒï¼šåŠæ‹”å¼©å¼µ",
                speaker: "æ¹›åœ‹æ¸…",
                text: `<span class="scene-description">(æ¹›åœ‹æ¸…çœ¼ç¥è®Šå†·ï¼Œç”¨åŠ›æ‹æ¡Œã€‚)</span>ã€Œå¤©ä¿ï¼Œå¹´è¼•äººç«æ°£åˆ¥é€™éº¼å¤§ã€‚æˆ‘å€‘ç«¹æ—å¹«æ˜¯ä¸æ€•è·Ÿä½ å€‘ä¸‰é‡åŸ”é–‹æˆ°ï¼Œä½†ä»Šå¤©æ˜¯åœ¨è«‡ç”Ÿæ„ã€‚ä½ å€‘æ˜‡é¾æ‰‹ä¸Šæœ‰å“ªå¹¾å€‹å·¥åœ°ï¼Œæˆ‘å¯æ˜¯æ¸…æ¥šå¾—å¾ˆã€‚å¤§å®¶æ±‚è²¡è€Œå·²ï¼ŒçœŸçš„è¦ç©é€™éº¼çµ•ï¼Ÿã€`,
                choices: [
                    { text: "A. [ å¦¥å”äº¤æ› ] ã€Œå¥½ã€‚A16 æˆ‘è®“ã€‚ä½†ã€åœŸæ–¹ã€è¦çµ¦æˆ‘åšã€‚ã€", narrative: "ä½ èªæ°£è»ŸåŒ–ï¼Œè©¦åœ–åœ¨å¨è„…ä¸‹ä¿ä½æœ€å¾Œä¸€é»åˆ©ç›Š...", next: "scene3" },
                    { text: "B. [ å€Ÿå‹¢æ–½å£“ ] ã€Œæåš‡æˆ‘ï¼Ÿé‚„æ˜¯æåš‡ä½•çµ„é•·ï¼Ÿé–€å¤–çš„åˆ‘è­¦å…„å¼Ÿå‰›å¥½ç¼ºç¸¾æ•ˆå‘¢ã€‚ã€", narrative: "ä½ æŒ‡äº†æŒ‡èº«é‚Šçš„ä½•çµ„é•·ï¼Œæ¹›åœ‹æ¸…çš„å›‚å¼µæ°£ç„°ç¬é–“è¢«å£“äº†ä¸‹å»ã€‚", next: "scene4" },
                    { text: "C. [ ç¿»æ¡Œé–‹æˆ° ] ã€Œæˆ‘å¯ä¸æ˜¯è¢«åš‡å¤§çš„ï¼Ÿè¦é–‹æˆ°ç¾åœ¨å°±ä¾†ï¼ã€", narrative: "ä½ çŒ›åœ°æ€ç¿»æ¡Œå­ï¼ŒèŒ¶å…·ç¢äº†ä¸€åœ°ï¼", next: "end2", vibrate: true }
                ]
            },

            "scene3": {
                title: "å ´æ™¯ä¸‰ï¼šç³–è¡£ç ²å½ˆ",
                speaker: "æ¹›åœ‹æ¸…",
                text: `<span class="scene-description">(æ¹›åœ‹æ¸…æ¨å‡ºä¸€å¼µå¯«è‘—æ•¸å­—çš„æ”¯ç¥¨ã€‚)</span>ã€Œå”‰ï¼Œå¤©ä¿å…„ï¼Œä½•å¿…å¼„å¾—é€™éº¼åƒµï¼Ÿé€™æ˜¯ä¸€é»ã€èŒ¶æ°´è²»ã€ï¼Œé€™æ•¸å­—å¤ ä½ åœ¨ä¸‰é‡åŸ”è²·å…©æ£Ÿé€å¤©äº†ã€‚ä»¥å¾Œä½ éƒ­å®¶é€²å…¥å°åŒ—å¸‚ï¼Œæˆ‘å€‘ç«¹æ—å¹«å°±æ˜¯ä½ çš„é–‹è·¯å…ˆé‹’ã€‚ã€`,
                choices: [
                    { text: "A. [ è²ªå©ª ] ã€Œå“ˆå“ˆï¼æ¹›å…„æœç„¶çˆ½å¿«ï¼é€™æ¨™æˆ‘å°±ä¸çˆ­äº†ï¼ã€", narrative: "ä½ çœ‹è‘—æ”¯ç¥¨ä¸Šçš„æ•¸å­—ï¼Œä¼¸æ‰‹æ¥éäº†é‚£å¼µç´™...", next: "end1" },
                    { text: "B. [ ç¿»èˆŠå¸³ ] ã€Œä¸Šæ¬¡æ–°åº—çš„é™¸æ©‹æˆ‘è®“äº†ã€‚é€™æ¬¡åˆè¦æˆ‘è®“ï¼Ÿæ¹›å…„ï¼Œä½ é€™ã€å…„å¼Ÿã€åšå¾—å¤ªä¾¿å®œäº†å§ï¼Ÿã€", narrative: "ä½ æŠŠç´™æ¢æ¨äº†å›å»ï¼Œå†·å†·åœ°ç¿»å‡ºäº†èˆŠå¸³ã€‚", next: "scene4" },
                    { text: "C. [ æ‹’çµ• ] ã€ŒéŒ¢æˆ‘å¤šçš„æ˜¯ã€‚æˆ‘è¦çš„æ˜¯åœ°ä½ã€‚æ¯”åƒ¹å ´ä¸Šè¦‹çœŸç« å§ï¼ã€", narrative: "ä½ èµ·èº«æ•´ç†è¥¿è£ï¼Œé ­ä¹Ÿä¸å›åœ°èµ°å‘é–€å£ã€‚", next: "end3", vibrate: true }
                ]
            },

            "scene4": {
                title: "å ´æ™¯å››ï¼šæ¬ŠåŠ›çš„æœ¬è³ª",
                speaker: "æ¹›åœ‹æ¸…",
                text: `<span class="scene-description">(æ¹›åœ‹æ¸…å£“ä½è²éŸ³ï¼Œé€™æ˜¯æœ€å¾Œçš„å°æ±ºã€‚)</span>ã€Œå¥½ï¼æˆ‘å°±æ˜è¬›äº†ã€‚A16 å·¥ç¨‹é ç®—è¿½åŠ çš„å…«åƒè¬ï¼Œæ˜¯ä¸Šé¢å¥½å¹¾å€‹ã€å¤§äººç‰©ã€è¦åˆ†çš„ã€‚æ›äº†ä½ å¤©ä¿å…„ä¾†åšï¼Œä½ æœ‰è¾¦æ³•å®‰æ’«é‚£äº›ã€å¤§äººç‰©ã€å—ï¼Ÿåªè¦ä½ è®“ï¼Œæœªä¾†å…©å¹´é€™å€çš„æ¨™æ¡ˆï¼Œæˆ‘æ¹›æŸäººçµ•ä¸æ’æ‰‹ã€‚ã€`,
                choices: [
                    { text: "A. [ æ¥å—ç•«å¤§é¤… ] ã€Œå¥½ï¼è¡è‘—åœ‹æ¸…å…„é€™å¥è©±ï¼Œæˆ‘å€‘ä»¥å¾Œä¸€èµ·ç™¼è²¡ï¼ã€", narrative: "ä½ è¢«æœªä¾†çš„é¡˜æ™¯æ²–æ˜äº†é ­ï¼Œæ¡ä½äº†ä»–çš„æ‰‹ã€‚", next: "end1" },
                    { text: "B. [ ç‹è€…æ€ç¶­ ] ã€Œå·¥ç¨‹æˆ‘æ‹¿ã€‚åŸæœ¬è©²çµ¦å¤§äººç‰©çš„ï¼Œæˆ‘ç…§çµ¦ï¼è‡³æ–¼æ¹›å…„é‚£ä»½ï¼Œæˆ‘ä¹Ÿæœƒæº–å‚™åšç¦®ã€‚\né€™æ¨£ä¸€ä¾†ï¼Œé¢å­ã€è£¡å­ã€éŠ€å­ï¼Œå¤§å®¶éƒ½æœ‰ã€‚é€™æ‰æ˜¯çœŸæ­£çš„é›™è´ã€‚ã€", narrative: "æ¹›åœ‹æ¸…æ„£ä½äº†ï¼Œä»–æ²’æƒ³åˆ°ä½ æœ‰é€™æ¨£çš„æ ¼å±€èˆ‡è†½è­˜...", next: "end4" },
                    { text: "C. [ å …æŒå°å¹¹ ] ã€Œä¸å¿…èªªäº†ã€‚å¤§äººç‰©é‚£é‚Šæˆ‘è‡ªç„¶æœ‰è¾¦æ³•ã€‚æˆ‘å€‘é‚„æ˜¯ç…§è¦çŸ©ä¾†ï¼ã€", narrative: "ä½ æ‹’çµ•äº†æ‰€æœ‰å¦¥å”ï¼Œæ±ºå®šå­¤æ³¨ä¸€æ“²ã€‚", next: "end3", vibrate: true }
                ]
            },

            // --- çµå±€å€ (åŒ…å«åˆ†äº«æ–‡æ¡ˆèˆ‡è³¼æ›¸æ–‡æ¡ˆ) ---
            "end1": {
                title: "çµå±€ä¸€ï¼šå–ªå®¶ä¹‹çŠ¬",
                speaker: "Bad End",
                text: "ä½ æ‹¿äº†éŒ¢ï¼Œè®“å‡ºäº†å·¥ç¨‹ã€‚é›–ç„¶æˆ¶é ­å¤šäº†é»æ•¸å­—ï¼Œä½†é“ä¸Šéƒ½å‚³è¨€éƒ­å¤©ä¿æ˜¯å€‹ã€Œçµ¦éŒ¢å°±æœƒå«çš„ç‹—ã€ã€‚\n\nåŠå¹´å¾Œï¼Œä½ çš„åœ°ç›¤è¢«æ–°èˆˆçš„è§’é ­è ¶é£Ÿã€‚ä½ æ´»äº†ä¸‹ä¾†ï¼Œä½†æ­»åœ¨äº†æ±Ÿæ¹–è£¡ã€‚",
                choices: [{ text: "ğŸ”„ é‡æ–°é–‹å§‹ï¼šæˆ‘è¦å¥ªå›å°Šåš´", narrative: "æ™‚å…‰å€’æµ...", next: "intro" }],
                // è¨­å®šå£çµå±€çš„åˆ†äº«æ–‡æ¡ˆ
                shareText: "æˆ‘åœ¨ã€Šå¤§å“¥ä¸Šä½ã€‹è£¡ç‚ºäº†éŒ¢ç•¶äº†ç¸®é ­çƒé¾œ...æ±Ÿæ¹–é€™æ¢è·¯çœŸé›£èµ°ï¼Œå¿«ä¾†å¹«æˆ‘å ±ä»‡ï¼ https://reurl.cc/NNq7G9  #å¤§å“¥ä¸Šä½ #é¡æ–‡å­¸",
                ctaText: "ğŸ“– è³¼è²·åŸè‘—ï¼šçœ‹æ—æ…¶ç¥¥å¦‚ä½•æå¯«é»‘é‡‘æ”¿æ²»çš„æ®˜é…·çµå±€"
            },
            
            "end2": {
                title: "çµå±€äºŒï¼šç‰¢ç„ä¹‹ç½",
                speaker: "Bad End",
                text: "ä½ çš„è¡å‹•å¼•ç™¼äº†æ··æˆ°ã€‚ç‚ºäº†å¹³æ¯è¼¿è«–ï¼Œä¸Šé¢æ±ºå®šæ‹¿ä½ é–‹åˆ€ã€‚ä½•åœ‹å½¬ç‚ºäº†ä¿ä½è­¦ç±ï¼Œä¸å¾—ä¸è¦ªæ‰‹çµ¦ä½ éŠ¬ä¸Šæ‰‹éŠ¬ã€‚\n\nä½ åœ¨ç¶ å³¶å”±è‘—å°å¤œæ›²ï¼Œçœ‹è‘—æ–°èè£¡æ¹›åœ‹æ¸…å‰ªç¶µ A16 å·¥ç¨‹çš„ç•«é¢ã€‚",
                choices: [{ text: "ğŸ”„ é‡æ–°é–‹å§‹ï¼šé€™æ¬¡æˆ‘æœƒå†·éœé»", narrative: "æ™‚å…‰å€’æµ...", next: "intro" }],
                shareText: "æˆ‘åœ¨ã€Šå¤§å“¥ä¸Šä½ã€‹è£¡å¤ªè¡å‹•è¢«æŠ“å»ç¶ å³¶å”±å°å¤œæ›²äº†...ä½ èƒ½æ¯”æˆ‘æ›´å†·éœå—ï¼Ÿ https://reurl.cc/NNq7G9  #å¤§å“¥ä¸Šä½ #é¡æ–‡å­¸",
                ctaText: "ğŸ“– è³¼è²·åŸè‘—ï¼šè¦‹è­‰çœŸå¯¦è­¦é»‘å‹¾çµçš„é©šå¿ƒå‹•é­„"
            },

            "end3": {
                title: "çµå±€ä¸‰ï¼šè¡€æœ¬ç„¡æ­¸",
                speaker: "Bad End",
                text: "ä½ å …æŒèµ°ã€Œæ­£è¦é€”å¾‘ã€ã€‚é›–ç„¶æ¨™åˆ°äº†å·¥ç¨‹ï¼Œä½†å› ç‚ºæ²’æœ‰å®‰æ’«å¥½å„æ–¹å‹¢åŠ›ï¼Œå·¥åœ°ä¸‰å¤©å…©é ­è¢«æª¢èˆ‰ã€æ–·æ°´æ–·é›»ã€‚\n\nå®Œå·¥å»¶å®•èˆ‡ç½°æ¬¾è®“æ˜‡é¾ç‡Ÿé€ å¾¹åº•ç ´ç”¢ã€‚ä½ è´äº†é¢å­ï¼Œè¼¸äº†è£¡å­ã€‚",
                choices: [{ text: "ğŸ”„ é‡æ–°é–‹å§‹ï¼šé€™æ¬¡æˆ‘è¦æ‡‚äººæƒ…ä¸–æ•…", narrative: "æ™‚å…‰å€’æµ...", next: "intro" }],
                shareText: "æˆ‘åœ¨ã€Šå¤§å“¥ä¸Šä½ã€‹è£¡å¤ªå¤©çœŸï¼Œçµæœè³ åˆ°è„«è¤²å­ï¼æ±Ÿæ¹–ä¸åªæ‰“æ®ºï¼Œæ›´æ˜¯äººæƒ…ä¸–æ•…å•Šã€‚ https://reurl.cc/NNq7G9  #å¤§å“¥ä¸Šä½ #é¡æ–‡å­¸",
                ctaText: "ğŸ“– è³¼è²·åŸè‘—ï¼šå­¸ç¿’å¦‚ä½•åœ¨éšªæƒ¡å®˜å ´ä¸­ç”Ÿå­˜"
            },

            "end4": {
                title: "çµå±€å››ï¼šæ–°æ•™çˆ¶èª•ç”Ÿ",
                speaker: "True End",
                text: "æ¹›åœ‹æ¸…å¤§ç¬‘ï¼šã€Œå¥½ï¼æˆäº¤ï¼æˆ‘çœŸæ˜¯è¼¸çµ¦ä½ äº†ï¼ã€ä½ æ‹¿ä¸‹äº† A16ï¼Œä¹Ÿå®‰æ’«äº†é«˜å±¤ã€‚å¾é‚£å¤©èµ·ï¼Œç¸±è²«ç·šä¸Šæ²’äººæ•¢ä¸å«ä½ ä¸€è²ã€Œå¤©ä¿å“¥ã€ã€‚\n\næ­¡è¿ä¾†åˆ°æ¬ŠåŠ›çš„é ‚å³°ã€‚",
                choices: [{ text: "ğŸ‘‘ å†ä¾†ä¸€å±€ï¼šå›å‘³å‚³å¥‡", narrative: "å‚³å¥‡ï¼Œæ°¸ä¸è½å¹•...", next: "intro" }],
                // è¨­å®šå¥½çµå±€çš„åˆ†äº«æ–‡æ¡ˆ
                shareText: "æˆ‘åœ¨ã€Šå¤§å“¥ä¸Šä½ã€‹ä¸­æå®šé»‘ç™½å…©é“ï¼Œæˆç‚ºæ–°ä¸€ä»£æ•™çˆ¶ï¼ä½ æœ‰è†½è­˜ä¾†æŒ‘æˆ°æ¬ŠåŠ›çš„é ‚å³°å—ï¼Ÿ https://reurl.cc/NNq7G9  #å¤§å“¥ä¸Šä½ #é¡æ–‡å­¸",
                ctaText: "ğŸ’° è³¼è²·åŸè‘—ï¼šæ‹œè®€ã€Šå¤§å“¥ä¸Šä½ã€‹ï¼Œå­¸ç¿’çœŸæ­£çš„æ¬Šè¬€ä¹‹è¡“"
            }
        };

        // ==================================================
        // éŠæˆ²å¼•æ“é‚è¼¯
        // ==================================================
        const ui = {
            container: document.getElementById('game-container'),
            title: document.getElementById('scene-title'),
            speaker: document.getElementById('speaker-name'),
            text: document.getElementById('story-text'),
            choices: document.getElementById('choices-box'),
            actionsArea: document.getElementById('end-actions-area'),
            narrativeOverlay: document.getElementById('narrative-overlay'),
            narrativeText: document.getElementById('narrative-text')
        };

        function renderScene(sceneId) {
            const scene = gameData[sceneId];
            if (!scene) return console.error("Scene not found:", sceneId);

            // 1. åŸºæœ¬UIæ›´æ–°
            ui.title.innerText = scene.title;
            ui.text.innerHTML = scene.text;
            
            // 2. èªªè©±è€…æ¨™ç±¤
            if (scene.speaker) {
                ui.speaker.innerText = scene.speaker;
                ui.speaker.classList.remove('hidden');
            } else {
                ui.speaker.classList.add('hidden');
            }

            // 3. ç”Ÿæˆä¸€èˆ¬é¸é …æŒ‰éˆ•
            ui.choices.innerHTML = '';
            scene.choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                if(sceneId.startsWith('end')) btn.classList.add('restart-style'); // çµå±€æ™‚çš„é‡æ–°é–‹å§‹æŒ‰éˆ•æ¨£å¼
                btn.innerText = choice.text;
                btn.onclick = () => handleChoice(choice);
                ui.choices.appendChild(btn);
            });

            // 4. è™•ç†çµå±€çš„ç‰¹æ®Šè¡Œå‹•æŒ‰éˆ• (åˆ†äº«èˆ‡è³¼æ›¸)
            ui.actionsArea.innerHTML = ''; // æ¸…ç©ºèˆŠæŒ‰éˆ•
            if (scene.shareText && scene.ctaText) {
                ui.actionsArea.classList.remove('hidden');
                
                // (A) è³¼æ›¸æŒ‰éˆ•
                const buyBtn = document.createElement('a');
                buyBtn.className = 'action-btn btn-buy';
                buyBtn.href = bookLink;
                buyBtn.target = "_blank"; // é–‹æ–°è¦–çª—
                buyBtn.innerText = scene.ctaText;
                ui.actionsArea.appendChild(buyBtn);

                // (B) åˆ†äº«æŒ‰éˆ•
                const shareBtn = document.createElement('button');
                shareBtn.className = 'action-btn btn-share';
                shareBtn.innerText = "ğŸ“¤ åˆ†äº«æˆ‘çš„çµå±€";
                shareBtn.onclick = () => shareResult(scene.shareText);
                ui.actionsArea.appendChild(shareBtn);

            } else {
                ui.actionsArea.classList.add('hidden');
            }

            // 5. è¦–è¦ºå›é¥‹ (é‚Šæ¡†é¡è‰²)
            ui.container.classList.remove('shake-effect');
            if (sceneId.startsWith('end') && sceneId !== 'end4') {
                ui.container.style.borderColor = '#c0392b'; // ç´…è‰²
            } else if (sceneId === 'end4') {
                ui.container.style.borderColor = '#ffd700'; // é‡‘è‰²
            } else {
                ui.container.style.borderColor = '#d4af37'; // é è¨­é‡‘
            }
            
            // æ²å‹•å›é ‚éƒ¨
            document.querySelector('.content-scroll-area').scrollTop = 0;
        }

        function handleChoice(choice) {
            // éœ‡å‹•
            if (choice.vibrate && navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
                ui.container.classList.add('shake-effect');
            }
            // éå ´æ–‡å­—
            ui.narrativeText.innerText = choice.narrative;
            ui.narrativeOverlay.classList.add('active');

            setTimeout(() => {
                ui.narrativeOverlay.classList.remove('active');
                renderScene(choice.next);
            }, 1500);
        }

        // åˆ†äº«åŠŸèƒ½
        async function shareResult(text) {
            const shareData = {
                title: 'å¤§å“¥ä¸Šä½ï¼šè§’é ­é¢¨é›²éŒ„',
                text: text,
                url: window.location.href
            };

            // å„ªå…ˆä½¿ç”¨æ‰‹æ©ŸåŸç”Ÿåˆ†äº«
            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                } catch (err) {
                    console.log('åˆ†äº«å–æ¶ˆ');
                }
            } else {
                // é›»è…¦ç‰ˆ fallbackï¼šè¤‡è£½åˆ°å‰ªè²¼ç°¿
                navigator.clipboard.writeText(text + " " + window.location.href).then(() => {
                    alert("æ–‡æ¡ˆå·²è¤‡è£½ï¼å¿«å»è²¼æ–‡ç‚«è€€ä½ çš„æ±Ÿæ¹–åœ°ä½ï¼");
                });
            }
        }

        // åˆå§‹åŒ–
        renderScene('intro');

    </script>
</body>

</html>

